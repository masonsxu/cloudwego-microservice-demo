# å‰ç«¯æ—¶é—´æˆ³æ ¼å¼è§„èŒƒ

## âœ… è§„åˆ™å·²è®°å½•

**é‡è¦çº¦å®š**ï¼šåç«¯è¿”å›çš„æ‰€æœ‰æ—¶é—´å­—æ®µå‡ä¸º**æ¯«ç§’çº§æ—¶é—´æˆ³**ï¼ˆnumber ç±»å‹ï¼Œ13ä½æ•´æ•°ï¼‰ã€‚

---

## ğŸ“ å·²åˆ›å»ºçš„æ–‡ä»¶

### 1. è§„èŒƒæ–‡æ¡£
- **æ–‡ä»¶**ï¼š`web/å¼€å‘è§„èŒƒ.md`
- **å†…å®¹**ï¼š
  - æ—¶é—´æˆ³æ ¼å¼å®šä¹‰
  - TypeScript ç±»å‹è§„èŒƒ
  - å·¥å…·å‡½æ•°ä½¿ç”¨è¯´æ˜
  - å¸¸è§é”™è¯¯ç¤ºä¾‹
  - æ³¨æ„äº‹é¡¹

### 2. å·¥å…·å‡½æ•°
- **æ–‡ä»¶**ï¼š`web/src/utils/date.ts`
- **å¯¼å‡ºå‡½æ•°**ï¼š
  - `formatTimestamp()` - æ ¼å¼åŒ–æ—¶é—´
  - `formatRelativeTime()` - ç›¸å¯¹æ—¶é—´
  - `formatOptionalTimestamp()` - å¯é€‰å­—æ®µ
  - `isTimestampExpired()` - æ£€æŸ¥è¿‡æœŸ
  - `getCurrentTimestamp()` - å½“å‰æ—¶é—´æˆ³

### 3. ä½¿ç”¨ç¤ºä¾‹
- **æ–‡ä»¶**ï¼š`web/src/components/TimestampDemo.vue`
- **å†…å®¹**ï¼š
  - å®é™…ä½¿ç”¨ç¤ºä¾‹
  - æ ¼å¼åŒ–æ•ˆæœå±•ç¤º
  - å·¥å…·å‡½æ•°è¯´æ˜

### 4. å¼€å‘æŒ‡å—æ›´æ–°
- **æ–‡ä»¶**ï¼š`docs/02-å¼€å‘è§„èŒƒ/å¼€å‘æŒ‡å—.md`
- **æ–°å¢**ï¼šå‰ç«¯æ•°æ®ç±»å‹çº¦å®šç« èŠ‚

---

## ğŸ” API å“åº”ç¤ºä¾‹

```json
{
  "user_profile": {
    "id": "e91b4a72-6c22-415e-80a9-f268a128f227",
    "username": "superadmin",
    "created_at": 1766021112386,
    "updated_at": 1771919315301,
    "last_login_time": 1771919315300
  }
}
```

æ‰€æœ‰æ—¶é—´å­—æ®µå‡ä¸º `number` ç±»å‹ï¼ˆæ¯«ç§’ï¼‰ã€‚

---

## ğŸ’¡ ä½¿ç”¨æ–¹æ³•

### 1. å¯¼å…¥å·¥å…·å‡½æ•°

```typescript
import { formatTimestamp, formatRelativeTime } from '@/utils/date'
```

### 2. æ ¼å¼åŒ–æ˜¾ç¤º

```vue
<template>
  <div>
    <p>åˆ›å»ºæ—¶é—´: {{ formatTimestamp(user.created_at) }}</p>
    <p>ç›¸å¯¹æ—¶é—´: {{ formatRelativeTime(user.created_at) }}</p>
  </div>
</template>

<script setup lang="ts">
import { formatTimestamp, formatRelativeTime } from '@/utils/date'

const user = {
  created_at: 1766021112386  // åç«¯è¿”å›çš„æ¯«ç§’æ—¶é—´æˆ³
}
</script>
```

### 3. TypeScript ç±»å‹

```typescript
// âœ… æ­£ç¡®
interface User {
  created_at: number  // æ¯«ç§’æ—¶é—´æˆ³
  updated_at?: number  // å¯é€‰
}

// âŒ é”™è¯¯
interface User {
  created_at: string  // ä¸è¦ç”¨å­—ç¬¦ä¸²
  created_at: Date    // ä¸è¦ç”¨ Date å¯¹è±¡
}
```

---

## ğŸ“‹ å¸¸è§å­—æ®µ

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `created_at` | `number` | åˆ›å»ºæ—¶é—´ |
| `updated_at` | `number` | æ›´æ–°æ—¶é—´ |
| `deleted_at` | `number` | åˆ é™¤æ—¶é—´ï¼ˆè½¯åˆ é™¤ï¼‰ |
| `last_login_time` | `number` | æœ€åç™»å½•æ—¶é—´ |
| `account_expiry` | `number` | è´¦æˆ·è¿‡æœŸæ—¶é—´ |
| `expires_in` | `number` | **æ³¨æ„ï¼šè¿™æ˜¯ç§’æ•°ï¼** |

---

## âš ï¸ é‡è¦æé†’

1. **ä¸è¦è½¬æ¢ç±»å‹**
   - ä¿æŒä¸º `number` ç±»å‹
   - ä¸è¦è½¬æ¢ä¸º `string` æˆ– `Date`

2. **ä½¿ç”¨å·¥å…·å‡½æ•°**
   - æ˜¾ç¤ºæ—¶è°ƒç”¨ `formatTimestamp()`
   - ç›¸å¯¹æ—¶é—´ä½¿ç”¨ `formatRelativeTime()`

3. **å¤„ç†å¯é€‰å­—æ®µ**
   - ä½¿ç”¨ `formatOptionalTimestamp()`
   - è‡ªåŠ¨å¤„ç† `undefined` æƒ…å†µ

4. **æ³¨æ„ä¾‹å¤–**
   - `expires_in` å­—æ®µæ˜¯**ç§’æ•°**ï¼Œä¸æ˜¯æ—¶é—´æˆ³

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- å®Œæ•´è§„èŒƒï¼š`web/å¼€å‘è§„èŒƒ.md`
- å·¥å…·å‡½æ•°ï¼š`web/src/utils/date.ts`
- ä½¿ç”¨ç¤ºä¾‹ï¼š`web/src/components/TimestampDemo.vue`
- å¼€å‘æŒ‡å—ï¼š`docs/02-å¼€å‘è§„èŒƒ/å¼€å‘æŒ‡å—.md`

---

**ç‰ˆæœ¬**ï¼šv1.0
**åˆ›å»ºæ—¶é—´**ï¼š2026-02-24
**ç»´æŠ¤è€…**ï¼šå‰ç«¯å›¢é˜Ÿ
